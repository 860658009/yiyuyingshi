(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/message/message"],{"26f1":function(e,t,n){},"6def":function(e,t,n){"use strict";n.r(t);var s=n("be7b"),i=n("8ea8");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("c355");var u,a=n("f0c5"),c=Object(a["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],u);t["default"]=c.exports},"8ea8":function(e,t,n){"use strict";n.r(t);var s=n("a384"),i=n.n(s);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o);t["default"]=i.a},a384:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp().globalData,s={data:function(){return{checked:!0,userLogin:!0,maskClick:!1,sendNum:0,getNum:0}},props:{},methods:{tab:function(){this.checked?(this.checked=!1,this.userLogin=this.$user_login,this.userLogin&&0==this.sendNum&&this.getSendNum(),this.$refs.sendView.open()):(this.$refs.sendView.close(),this.checked=!0)},onGotUserInfo:function(t){var s=this;e.login({provider:"weixin",success:function(e){var i=t.detail.userInfo,o=e.code,u=s.md5(i.avatarUrl+s.cjurl+s.mark+i.nickName+n.$platform+n.$scene.scene+"App.User.WxRegister"+o),a=s.cjurl+"wxApi/public/?service=App.User.WxRegister&user="+o+"&name="+i.nickName+"&avatarUrl="+i.avatarUrl+"&mark="+s.mark+"&platform="+n.$platform+"&scene="+n.$scene.scene+"&host="+s.cjurl+"&sign="+u;s.api.wxRegister(a).then((function(e){s.userLogin=s.$user_login,s.getSendNum()}))}})},subscribe:function(){var t=this;if(0!=n.$config.site.message.hasOwnProperty("tmpIds")){var s=n.$config.site.message.tmpIds.split(",");e.requestSubscribeMessage?e.requestSubscribeMessage({tmplIds:s,success:function(e){"accept"===e[s[0]]&&t.sendNum++},fail:function(t){console.log(t),e.showModal({content:"未授权发送通知，请到小程序设置界面开启订阅",confirmText:"去开启",cancelText:"取消",success:function(e){e.confirm&&wx.getSetting({withSubscriptions:!0,success:function(e){console.log(e.authSetting),console.log(e.subscriptionsSetting)}})}})}}):wx.showToast({title:"请更新您微信版本，来获取订阅消息功能",icon:"none"})}else wx.showToast({title:"模版错误,联系客服反馈!",icon:"none"})},setSubscribe:function(){var t=this;if(this.getNum!=this.sendNum){e.showLoading({mask:!0,title:"订阅中..."});var n=e.getStorageSync("$voddata"),s=this.sendNum,i=e.getStorageSync("$userInfo").user_openid_weixin,o=e.getStorageSync("$userInfo").user_id,u=this.md5(this.mark+i+"App.Ulog.SetSubscribe"+n.type_id+s+o+n.vod_id),a=this.cjurl+"wxApi/public/?service=App.Ulog.SetSubscribe&vod_id="+n.vod_id+"&type_id="+n.type_id+"&ulog_nid="+s+"&user_id="+o+"&mark="+this.mark+"&openid="+i+"&sign="+u;this.api.apiRequest(a).then((function(n){e.hideLoading(),200==n.Code&&200==n.Data.code&&(t.sendNum=n.Data.send_num,t.getNum=n.Data.send_num,e.showToast({title:n.Data.msg,icon:"none",duration:3e3}))}))}else e.showToast({title:"未做修改",icon:"none",duration:2e3})},getSendNum:function(){var t=this,n=e.getStorageSync("$userInfo").user_id,s=e.getStorageSync("$voddata").vod_id,i=this.md5("App.Ulog.GetLog"+n+s),o=this.cjurl+"wxApi/public/?service=App.Ulog.GetLog&vod_id="+s+"&user_id="+n+"&sign="+i;this.api.apiRequest(o).then((function(e){200==e.Code&&0!=e.Data&&(t.sendNum=e.Data.send_num,t.getNum=e.Data.send_num)}))}},watch:{}};t.default=s}).call(this,n("543d")["default"])},be7b:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var s={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"8930"))}},i=function(){var e=this,t=e.$createElement;e._self._c},o=[]},c355:function(e,t,n){"use strict";var s=n("26f1"),i=n.n(s);i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/message/message-create-component',
    {
        'components/message/message-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6def"))
        })
    },
    [['components/message/message-create-component']]
]);
